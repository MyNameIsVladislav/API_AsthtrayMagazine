ERROR 2021-10-14 21:31:07,111 log 11582 140207555720960 Internal Server Error: /admin/cart/basketmodel/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/backends/utils.py", line 84, in _execute
    return self.cursor.execute(sql, params)
psycopg2.errors.UndefinedTable: relation "cart_basketmodel" does not exist
LINE 1: SELECT COUNT(*) AS "__count" FROM "cart_basketmodel"
                                          ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/contrib/admin/options.py", line 616, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/contrib/admin/sites.py", line 232, in inner
    return view(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/contrib/admin/options.py", line 1697, in changelist_view
    cl = self.get_changelist_instance(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/contrib/admin/options.py", line 736, in get_changelist_instance
    return ChangeList(
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/contrib/admin/views/main.py", line 100, in __init__
    self.get_results(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/contrib/admin/views/main.py", line 235, in get_results
    result_count = paginator.count
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/utils/functional.py", line 48, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/paginator.py", line 97, in count
    return c()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/query.py", line 412, in count
    return self.query.get_count(using=self.db)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/sql/query.py", line 519, in get_count
    number = obj.get_aggregation(using, ['__count'])['__count']
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/sql/query.py", line 504, in get_aggregation
    result = compiler.execute_sql(SINGLE)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/sql/compiler.py", line 1175, in execute_sql
    cursor.execute(sql, params)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/backends/utils.py", line 98, in execute
    return super().execute(sql, params)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/backends/utils.py", line 66, in execute
    return self._execute_with_wrappers(sql, params, many=False, executor=self._execute)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/backends/utils.py", line 75, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/backends/utils.py", line 84, in _execute
    return self.cursor.execute(sql, params)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/utils.py", line 90, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/backends/utils.py", line 84, in _execute
    return self.cursor.execute(sql, params)
django.db.utils.ProgrammingError: relation "cart_basketmodel" does not exist
LINE 1: SELECT COUNT(*) AS "__count" FROM "cart_basketmodel"
                                          ^

ERROR 2021-10-14 21:52:44,497 log 12175 140139569465088 Internal Server Error: /api/cart/add-to-cart/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 204, in _get_response
    response = response.render()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/template/response.py", line 105, in render
    self.content = self.rendered_content
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/response.py", line 70, in rendered_content
    ret = renderer.render(self.data, accepted_media_type, context)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/renderers.py", line 724, in render
    context = self.get_context(data, accepted_media_type, renderer_context)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/renderers.py", line 655, in get_context
    raw_data_post_form = self.get_raw_data_form(data, view, 'POST', request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/renderers.py", line 563, in get_raw_data_form
    data = serializer.data.copy()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 562, in data
    ret = super().data
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 264, in data
    self._data = self.get_initial()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 412, in get_initial
    for field in self.fields.values()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/utils/functional.py", line 48, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 363, in fields
    for key, value in self.get_fields().items():
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 1038, in get_fields
    field_names = self.get_field_names(declared_fields, info)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 1134, in get_field_names
    assert field_name in fields, (
AssertionError: The field 'cart' was declared on serializer BasketProductSerializers, but has not been included in the 'fields' option.
ERROR 2021-10-14 22:01:18,981 log 12409 140186630412032 Internal Server Error: /api/cart/add-to-cart/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 948, in create
    instance = ModelClass._default_manager.create(**validated_data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/query.py", line 451, in create
    obj = self.model(**kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/base.py", line 503, in __init__
    raise TypeError("%s() got an unexpected keyword argument '%s'" % (cls.__name__, kwarg))
TypeError: BasketProductModel() got an unexpected keyword argument 'price'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/generics.py", line 190, in post
    return self.create(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/mixins.py", line 19, in create
    self.perform_create(serializer)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/mixins.py", line 24, in perform_create
    serializer.save()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 212, in save
    self.instance = self.create(validated_data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 967, in create
    raise TypeError(msg)
TypeError: Got a `TypeError` when calling `BasketProductModel.objects.create()`. This may be because you have a writable field on the serializer class that is not a valid argument to `BasketProductModel.objects.create()`. You may need to make the field read-only, or override the BasketProductSerializers.create() method to handle this correctly.
Original exception was:
 Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 948, in create
    instance = ModelClass._default_manager.create(**validated_data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/query.py", line 451, in create
    obj = self.model(**kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/base.py", line 503, in __init__
    raise TypeError("%s() got an unexpected keyword argument '%s'" % (cls.__name__, kwarg))
TypeError: BasketProductModel() got an unexpected keyword argument 'price'

ERROR 2021-10-14 22:02:11,596 log 12427 140691683452672 Internal Server Error: /api/cart/add-to-cart/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/generics.py", line 190, in post
    return self.create(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/mixins.py", line 18, in create
    serializer.is_valid(raise_exception=True)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 234, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 433, in run_validation
    value = self.to_internal_value(data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 486, in to_internal_value
    for field in fields:
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 369, in _writable_fields
    for field in self.fields.values():
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/utils/functional.py", line 48, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 363, in fields
    for key, value in self.get_fields().items():
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 1038, in get_fields
    field_names = self.get_field_names(declared_fields, info)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 1134, in get_field_names
    assert field_name in fields, (
AssertionError: The field 'price' was declared on serializer BasketProductSerializers, but has not been included in the 'fields' option.
ERROR 2021-10-14 22:10:54,545 log 12825 139747647534848 Internal Server Error: /api/cart/add-to-cart/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/generics.py", line 190, in post
    return self.create(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/mixins.py", line 18, in create
    serializer.is_valid(raise_exception=True)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 234, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 433, in run_validation
    value = self.to_internal_value(data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 486, in to_internal_value
    for field in fields:
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 369, in _writable_fields
    for field in self.fields.values():
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/utils/functional.py", line 48, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 363, in fields
    for key, value in self.get_fields().items():
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 1038, in get_fields
    field_names = self.get_field_names(declared_fields, info)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 1134, in get_field_names
    assert field_name in fields, (
AssertionError: The field 'cart' was declared on serializer AddProductSerializers, but has not been included in the 'fields' option.
ERROR 2021-10-14 22:11:32,425 log 12847 140262156269312 Internal Server Error: /api/cart/user-cart/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/cart/views.py", line 28, in get
    return Response(serializer.data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 562, in data
    ret = super().data
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 260, in data
    self._data = self.to_representation(self.instance)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 514, in to_representation
    for field in fields:
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 375, in _readable_fields
    for field in self.fields.values():
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/utils/functional.py", line 48, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 363, in fields
    for key, value in self.get_fields().items():
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 1062, in get_fields
    field_class, field_kwargs = self.build_field(
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 1208, in build_field
    return self.build_unknown_field(field_name, model_class)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 1323, in build_unknown_field
    raise ImproperlyConfigured(
django.core.exceptions.ImproperlyConfigured: Field name `user` is not valid for model `BasketProductModel`.
ERROR 2021-10-14 23:00:18,618 log 14117 139689876469504 Internal Server Error: /api/cart/add-to-cart/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/generics.py", line 190, in post
    return self.create(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/cart/views.py", line 24, in create
    self.update(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/mixins.py", line 65, in update
    instance = self.get_object()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/generics.py", line 88, in get_object
    assert lookup_url_kwarg in self.kwargs, (
AssertionError: Expected view AddProductInCart to be called with a URL keyword argument named "pk". Fix your URL conf, or set the `.lookup_field` attribute on the view correctly.
ERROR 2021-10-14 23:21:13,220 log 14645 140078721373952 Internal Server Error: /api/cart/add-to-cart/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/generics.py", line 190, in post
    return self.create(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/cart/views.py", line 23, in create
    self.update(request, instance)
  File "/home/bruse/rest_api/project/cart/views.py", line 29, in update
    serializer.save()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 207, in save
    self.instance = self.update(self.instance, validated_data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 979, in update
    info = model_meta.get_field_info(instance)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/utils/model_meta.py", line 35, in get_field_info
    opts = model._meta.concrete_model._meta
AttributeError: 'QuerySet' object has no attribute '_meta'
ERROR 2021-10-14 23:22:01,677 log 14669 140716773660416 Internal Server Error: /api/cart/add-to-cart/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/generics.py", line 190, in post
    return self.create(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/cart/views.py", line 23, in create
    self.update(request, instance)
  File "/home/bruse/rest_api/project/cart/views.py", line 30, in update
    serializer.save()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 207, in save
    self.instance = self.update(self.instance, validated_data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 979, in update
    info = model_meta.get_field_info(instance)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/utils/model_meta.py", line 35, in get_field_info
    opts = model._meta.concrete_model._meta
AttributeError: 'QuerySet' object has no attribute '_meta'
ERROR 2021-10-14 23:57:45,671 log 16123 140628301444864 Internal Server Error: /api/cart/add-to-cart/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/generics.py", line 190, in post
    return self.create(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/cart/views.py", line 24, in create
    return self.update(request, queryset=instance.first())
  File "/home/bruse/rest_api/project/cart/views.py", line 30, in update
    serializer.save()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 177, in save
    assert hasattr(self, '_errors'), (
AssertionError: You must call `.is_valid()` before calling `.save()`.
ERROR 2021-10-14 23:58:13,890 log 16151 139925106202368 Internal Server Error: /api/cart/add-to-cart/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/generics.py", line 190, in post
    return self.create(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/cart/views.py", line 23, in create
    return self.update(request, queryset=instance.first())
  File "/home/bruse/rest_api/project/cart/views.py", line 29, in update
    serializer.save()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 177, in save
    assert hasattr(self, '_errors'), (
AssertionError: You must call `.is_valid()` before calling `.save()`.
ERROR 2021-10-14 23:58:18,302 log 16151 139925106202368 Internal Server Error: /api/cart/add-to-cart/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/generics.py", line 190, in post
    return self.create(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/cart/views.py", line 23, in create
    return self.update(request, queryset=instance.first())
  File "/home/bruse/rest_api/project/cart/views.py", line 29, in update
    serializer.save()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 177, in save
    assert hasattr(self, '_errors'), (
AssertionError: You must call `.is_valid()` before calling `.save()`.
ERROR 2021-10-14 23:58:21,580 log 16151 139925106202368 Internal Server Error: /api/cart/add-to-cart/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/generics.py", line 190, in post
    return self.create(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/cart/views.py", line 23, in create
    return self.update(request, queryset=instance.first())
  File "/home/bruse/rest_api/project/cart/views.py", line 29, in update
    serializer.save()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 177, in save
    assert hasattr(self, '_errors'), (
AssertionError: You must call `.is_valid()` before calling `.save()`.
ERROR 2021-10-15 00:11:53,134 log 16583 140138331666176 Internal Server Error: /api/cart/add-to-cart/
Traceback (most recent call last):
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 948, in create
    instance = ModelClass._default_manager.create(**validated_data)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/db/models/query.py", line 453, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/db/models/base.py", line 726, in save
    self.save_base(using=using, force_insert=force_insert,
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/db/models/base.py", line 774, in save_base
    post_save.send(
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/dispatch/dispatcher.py", line 180, in send
    return [
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/dispatch/dispatcher.py", line 181, in <listcomp>
    (receiver, receiver(signal=self, sender=sender, **named))
  File "/home/bruse/rest_api/project/cart/models.py", line 41, in delete_old_product
    del_product_in_cart.apply_async(instance.pk, countdown=60)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/celery/app/task.py", line 537, in apply_async
    check_arguments(*(args or ()), **(kwargs or {}))
TypeError: del_product_in_cart() argument after * must be an iterable, not int

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/generics.py", line 190, in post
    return self.create(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/cart/views.py", line 25, in create
    return super(AddProductInCart, self).create(request, *args, **kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/mixins.py", line 19, in create
    self.perform_create(serializer)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/mixins.py", line 24, in perform_create
    serializer.save()
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 212, in save
    self.instance = self.create(validated_data)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 967, in create
    raise TypeError(msg)
TypeError: Got a `TypeError` when calling `BasketProductModel.objects.create()`. This may be because you have a writable field on the serializer class that is not a valid argument to `BasketProductModel.objects.create()`. You may need to make the field read-only, or override the AddProductSerializers.create() method to handle this correctly.
Original exception was:
 Traceback (most recent call last):
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 948, in create
    instance = ModelClass._default_manager.create(**validated_data)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/db/models/query.py", line 453, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/db/models/base.py", line 726, in save
    self.save_base(using=using, force_insert=force_insert,
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/db/models/base.py", line 774, in save_base
    post_save.send(
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/dispatch/dispatcher.py", line 180, in send
    return [
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/dispatch/dispatcher.py", line 181, in <listcomp>
    (receiver, receiver(signal=self, sender=sender, **named))
  File "/home/bruse/rest_api/project/cart/models.py", line 41, in delete_old_product
    del_product_in_cart.apply_async(instance.pk, countdown=60)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/celery/app/task.py", line 537, in apply_async
    check_arguments(*(args or ()), **(kwargs or {}))
TypeError: del_product_in_cart() argument after * must be an iterable, not int

ERROR 2021-10-15 11:22:17,586 log 6261 139800761845504 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/fields/__init__.py", line 1823, in get_prep_value
    return int(value)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/contrib/auth/models.py", line 420, in __int__
    raise TypeError('Cannot cast AnonymousUser to int. Are you trying to use it in place of User?')
TypeError: Cannot cast AnonymousUser to int. Are you trying to use it in place of User?

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 73, in get
    queryset = BasketModel.objects.get(user=request.user)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/query.py", line 424, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/query.py", line 941, in filter
    return self._filter_or_exclude(False, args, kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/query.py", line 961, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/query.py", line 968, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/sql/query.py", line 1393, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/sql/query.py", line 1412, in _add_q
    child_clause, needed_inner = self.build_filter(
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/sql/query.py", line 1347, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/sql/query.py", line 1193, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/lookups.py", line 25, in __init__
    self.rhs = self.get_prep_lookup()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/fields/related_lookups.py", line 117, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/fields/__init__.py", line 1825, in get_prep_value
    raise e.__class__(
TypeError: Field 'id' expected a number but got <django.contrib.auth.models.AnonymousUser object at 0x7f25e6c42820>.
ERROR 2021-10-15 12:04:44,958 log 7567 140045361833728 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 85, in post
    serializer.is_valid()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 227, in is_valid
    assert hasattr(self, 'initial_data'), (
AssertionError: Cannot call `.is_valid()` as no `data=` keyword argument was passed when instantiating the serializer instance.
ERROR 2021-10-15 12:06:03,768 log 7623 140170284234496 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/utils/datastructures.py", line 76, in __getitem__
    list_ = super().__getitem__(key)
KeyError: 'user'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/fields.py", line 454, in get_attribute
    return get_attribute(instance, self.source_attrs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/fields.py", line 92, in get_attribute
    instance = instance[attr]
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/utils/datastructures.py", line 78, in __getitem__
    raise MultiValueDictKeyError(key)
django.utils.datastructures.MultiValueDictKeyError: 'user'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 85, in post
    return Response(serializer.data, status=201)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 562, in data
    ret = super().data
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 260, in data
    self._data = self.to_representation(self.instance)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 516, in to_representation
    attribute = field.get_attribute(instance)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/fields.py", line 487, in get_attribute
    raise type(exc)(msg)
django.utils.datastructures.MultiValueDictKeyError: "Got MultiValueDictKeyError when attempting to get a value for field `email` on serializer `OrderSerializer`.\nThe serializer field might be named incorrectly and not match any attribute or key on the `QueryDict` instance.\nOriginal exception text was: 'user'."
ERROR 2021-10-15 12:07:55,175 log 7687 140087385626368 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 85, in post
    serializer.is_valid()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 227, in is_valid
    assert hasattr(self, 'initial_data'), (
AssertionError: Cannot call `.is_valid()` as no `data=` keyword argument was passed when instantiating the serializer instance.
ERROR 2021-10-15 13:36:26,745 log 9724 139630889043712 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 86, in post
    serializer.save()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 177, in save
    assert hasattr(self, '_errors'), (
AssertionError: You must call `.is_valid()` before calling `.save()`.
ERROR 2021-10-15 13:36:41,905 log 9735 139951161583360 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 86, in post
    serializer.is_valid()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 227, in is_valid
    assert hasattr(self, 'initial_data'), (
AssertionError: Cannot call `.is_valid()` as no `data=` keyword argument was passed when instantiating the serializer instance.
ERROR 2021-10-15 13:37:10,891 log 9756 139899494426368 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 86, in post
    serializer.is_valid()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 234, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 433, in run_validation
    value = self.to_internal_value(data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 490, in to_internal_value
    validated_value = field.run_validation(primitive_value)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/fields.py", line 562, in run_validation
    (is_empty_value, data) = self.validate_empty_values(data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/fields.py", line 538, in validate_empty_values
    return (True, self.get_default())
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/fields.py", line 513, in get_default
    return self.default(self)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/fields.py", line 287, in __call__
    return serializer_field.context['request'].user
KeyError: 'request'
ERROR 2021-10-15 13:38:57,114 log 9815 139636750391040 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 86, in post
    serializer.is_valid()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 234, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 433, in run_validation
    value = self.to_internal_value(data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 490, in to_internal_value
    validated_value = field.run_validation(primitive_value)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/fields.py", line 562, in run_validation
    (is_empty_value, data) = self.validate_empty_values(data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/fields.py", line 538, in validate_empty_values
    return (True, self.get_default())
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/fields.py", line 513, in get_default
    return self.default(self)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/fields.py", line 287, in __call__
    return serializer_field.context['request'].user
KeyError: 'request'
ERROR 2021-10-15 13:40:58,671 log 9905 139728838432512 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 86, in post
    serializer.is_valid()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 234, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 433, in run_validation
    value = self.to_internal_value(data)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 492, in to_internal_value
    validated_value = validate_method(validated_value)
  File "/home/bruse/rest_api/project/orderapp/serializer.py", line 17, in validate_first_name
    return value.first_name
AttributeError: 'str' object has no attribute 'first_name'
ERROR 2021-10-15 13:43:04,548 log 9969 140680907990784 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 87, in post
    serializer.save()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 181, in save
    assert not self.errors, (
AssertionError: You cannot call `.save()` on a serializer with invalid data.
ERROR 2021-10-15 13:43:28,972 log 9969 140680907990784 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 87, in post
    serializer.save()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 181, in save
    assert not self.errors, (
AssertionError: You cannot call `.save()` on a serializer with invalid data.
ERROR 2021-10-15 13:54:27,379 log 10345 140526900737792 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 87, in post
    serializer.save(paid=True, commit=False)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/serializers.py", line 186, in save
    assert 'commit' not in kwargs, (
AssertionError: 'commit' is not a valid keyword argument to the 'save()' method. If you need to access data before committing to the database then inspect 'serializer.validated_data' instead. You can also pass additional keyword arguments to 'save()' if you need to set extra attributes on the saved model instance. For example: 'serializer.save(owner=request.user)'.'
ERROR 2021-10-15 13:56:58,452 log 10451 140024005306112 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 88, in post
    print(type(erializer.validated_data['user']))
NameError: name 'erializer' is not defined
ERROR 2021-10-15 14:34:22,805 log 11518 139708743325440 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 507, in dispatch
    self.response = self.finalize_response(request, response, *args, **kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 419, in finalize_response
    assert isinstance(response, HttpResponseBase), (
AssertionError: Expected a `Response`, `HttpResponse` or `HttpStreamingResponse` to be returned from the view, but received a `<class 'NoneType'>`
ERROR 2021-10-15 14:36:18,378 log 11574 140679959967488 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 89, in post
    return pay_product(request, serializer, cart)
  File "/usr/lib/python3.8/contextlib.py", line 75, in inner
    return func(*args, **kwds)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 108, in pay_product
    send_email_success(cart, request.user, cart.email)
AttributeError: 'BasketModel' object has no attribute 'email'
ERROR 2021-10-15 14:37:17,920 log 11640 140556697073408 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 89, in post
    return pay_product(request, serializer, cart)
  File "/usr/lib/python3.8/contextlib.py", line 75, in inner
    return func(*args, **kwds)
  File "/home/bruse/rest_api/project/orderapp/views.py", line 108, in pay_product
    send_email_success(order.validated_data['email'])
TypeError: send_email_success() missing 2 required positional arguments: 'user' and 'email'
ERROR 2021-10-15 14:48:18,266 log 12005 140204826400512 Internal Server Error: /api/order/create-order/
Traceback (most recent call last):
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 507, in dispatch
    self.response = self.finalize_response(request, response, *args, **kwargs)
  File "/home/bruse/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 419, in finalize_response
    assert isinstance(response, HttpResponseBase), (
AssertionError: Expected a `Response`, `HttpResponse` or `HttpStreamingResponse` to be returned from the view, but received a `<class 'NoneType'>`
ERROR 2021-10-19 16:45:25,741 log 8440 140206199134016 Internal Server Error: /api/wallet/user/
Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/backends/base/base.py", line 237, in _cursor
    return self._prepare_cursor(self.create_cursor(name))
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/utils/asyncio.py", line 26, in inner
    return func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/backends/postgresql/base.py", line 236, in create_cursor
    cursor = self.connection.cursor()
psycopg2.InterfaceError: connection already closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
    response = get_response(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/decorators/csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/views/generic/base.py", line 70, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 476, in raise_uncaught_exception
    raise exc
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 493, in dispatch
    self.initial(request, *args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 410, in initial
    self.perform_authentication(request)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/views.py", line 324, in perform_authentication
    request.user
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/request.py", line 220, in user
    self._authenticate()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/request.py", line 373, in _authenticate
    user_auth_tuple = authenticator.authenticate(self)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/authentication.py", line 189, in authenticate
    return self.authenticate_credentials(token)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/rest_framework/authentication.py", line 194, in authenticate_credentials
    token = model.objects.select_related('user').get(key=key)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/query.py", line 431, in get
    num = len(clone)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/query.py", line 262, in __len__
    self._fetch_all()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/query.py", line 1324, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/query.py", line 51, in __iter__
    results = compiler.execute_sql(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/models/sql/compiler.py", line 1173, in execute_sql
    cursor = self.connection.cursor()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/utils/asyncio.py", line 26, in inner
    return func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/backends/base/base.py", line 259, in cursor
    return self._cursor()
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/backends/base/base.py", line 237, in _cursor
    return self._prepare_cursor(self.create_cursor(name))
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/utils.py", line 90, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/backends/base/base.py", line 237, in _cursor
    return self._prepare_cursor(self.create_cursor(name))
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/utils/asyncio.py", line 26, in inner
    return func(*args, **kwargs)
  File "/home/vladislav/rest_api/venv/lib/python3.8/site-packages/django/db/backends/postgresql/base.py", line 236, in create_cursor
    cursor = self.connection.cursor()
django.db.utils.InterfaceError: connection already closed
